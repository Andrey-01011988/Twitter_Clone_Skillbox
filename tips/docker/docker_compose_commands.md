Вот обновлённый файл с командами Docker Compose, в который добавлена информация о командах, связанных с volumes:

---

# Основные команды Docker Compose

Docker Compose — это инструмент для определения и запуска многоконтейнерных Docker приложений. Он использует файл `docker-compose.yml` для конфигурации сервисов, сетей и томов. Вот основные команды Docker Compose и их описания:

## 1. `docker-compose up`

**Описание**: Запускает контейнеры, определенные в `docker-compose.yml`. Если контейнеры не существуют, они будут созданы. Эта команда также создает сети и тома, если они указаны.

**Примеры использования**:
- `docker-compose up` — запускает все сервисы в фоновом режиме.
- `docker-compose up -d` — запускает все сервисы в фоновом режиме (detached mode).

---

## 2. `docker-compose down`

**Описание**: Останавливает и удаляет все контейнеры, созданные командой `up`, а также сети и тома, если они не используются другими контейнерами.

**Примеры использования**:
- `docker-compose down` — останавливает и удаляет все контейнеры.
- `docker-compose down --volumes` — также удаляет тома.

---

## 3. `docker-compose build`

**Описание**: Строит или перестраивает образы для сервисов, определенных в `docker-compose.yml`. Эта команда используется, если вы изменили Dockerfile или контекст сборки.

**Примеры использования**:
- `docker-compose build` — строит образы для всех сервисов.
- `docker-compose build <service>` — строит образ только для указанного сервиса.

---

## 4. `docker-compose logs`

**Описание**: Выводит логи всех контейнеров или конкретного контейнера.

**Примеры использования**:
- `docker-compose logs` — показывает логи всех сервисов.
- `docker-compose logs <service>` — показывает логи только указанного сервиса.
- `docker-compose logs -f` — следит за логами в реальном времени.
- `docker-compose logs -f --tail 10` — ограничивает количество выводимых строк (до 10).
- Нажмите `Ctrl + C` для выхода из сессии в терминале (например: из слежения за логами).

---

## 5. `docker-compose ps`

**Описание**: Показывает список запущенных контейнеров и их статус.

**Примеры использования**:
- `docker-compose ps` — выводит список всех контейнеров, связанных с текущим проектом.

---

## 6. `docker-compose exec`

**Описание**: Выполняет команду в работающем контейнере.

**Примеры использования**:
- `docker-compose exec <service> <command>` — выполняет указанную команду в контейнере сервиса.
- Например, `docker-compose exec web bash` — открывает оболочку bash в контейнере сервиса "web".

---

## 7. `docker-compose stop`

**Описание**: Останавливает работающие контейнеры без их удаления. Это позволяет позже запустить их снова без необходимости пересоздания.

---

## 8. `docker-compose start`

**Описание**: Запускает остановленные контейнеры, которые были созданы ранее с помощью команды `up`.

---

## 9. `docker-compose restart`

**Описание**: Перезапускает работающие контейнеры. Это полезно для применения изменений конфигурации или обновлений кода без полной остановки приложения.

---

## 10. `docker-compose config`

**Описание**: Проверяет и выводит конфигурацию проекта в формате YAML. Это полезно для проверки синтаксиса файла `docker-compose.yml`.

---

## 11. Команды, связанные с volumes

### a) `docker volume ls`

**Описание**: Показывает список всех созданных volumes на вашей системе.

---

### b) `docker volume inspect <volume_name>`

**Описание**: Выводит подробную информацию о конкретном volume, включая его параметры и путь хранения данных на хосте.

**Примеры использования**:
- `docker volume inspect test_db_data` — показывает информацию о volume с именем "test_db_data".

---

### c) `docker volume rm <volume_name>`

**Описание**: Удаляет указанный volume из системы. Этот volume должен быть неиспользуемым (т.е. не должен быть подключен ни к одному контейнеру).

---

### d) `docker volume prune`

**Описание**: Удаляет все неиспользуемые volumes из системы, освобождая место на диске.

---

### e) Использование volumes в Docker Compose

При использовании volumes в файле `docker-compose.yml`, вы можете определить их следующим образом:

```yaml
volumes:
  my_volume_name:  # Определение именованного volume
```

Затем вы можете использовать этот volume в сервисах:

```yaml
services:
  my_service:
    volumes:
      - my_volume_name:/path/in/container
```

Это позволяет обеспечить постоянное хранилище данных для ваших приложений.

---

## 12. Дополнительные команды

### a) `docker-compose down -v --rmi all`

Команда выполняет несколько действий, связанных с управлением ресурсами Docker Compose:

1. **`down`**: Останавливает и удаляет все контейнеры, сети и тома, созданные с помощью команды `up`.
2. **`-v`**: Указывает на необходимость удаления всех томов, связанных с контейнерами.
3. **`--rmi all`**: Указывает на удаление всех образов, которые использовались любыми сервисами в вашем файле.

Эта команда обеспечивает полное очищение всех ресурсов проекта Docker Compose.

---

### b) `docker-compose -f docker-compose.test.yaml up --build`

Команда выполняет следующие действия:

1. **Указание файла конфигурации**: Использует файл `docker-compose.test.yaml`.
2. **Запуск контейнеров (`up`)**: Создает и запускает контейнеры, определенные в файле.
3. **Сборка образов (`--build`)**: Пересобирает образы перед запуском контейнеров.

Эта команда полезна для тестирования изменений в коде и зависимостях.

---

### c) `docker-compose -f docker-compose.test.yaml down --volumes`

Команда выполняет следующие действия:

1. **Указание файла конфигурации (`-f`)**: Использует файл конфигурации `docker-compose.test.yaml`.
2. **Остановка и удаление (`down`)**: Останавливает и удаляет все контейнеры и сети.
3. **Удаление томов (`--volumes`)**: Удаляет все тома, связанные с этими контейнерами.

Это полезно для полной очистки ресурсов после тестирования или разработки.

---

Эти команды являются основными инструментами для работы с Docker Compose и позволяют вам эффективно управлять многоконтейнерными приложениями. Убедитесь, что вы используете правильные команды в зависимости от ваших потребностей при разработке и развертывании приложений с использованием Docker Compose.

--- 

Citations:
 https://docs.docker.com/compose/
 https://docs.docker.com/engine/reference/commandline/volume/
 https://docs.docker.com/compose/compose-file/compose-file-v2/#volumes
 https://docs.docker.com/compose/reference/overview/
 https://stackoverflow.com/questions/46428420/docker-volume-prune-command-explained
 https://www.baeldung.com/docker-volumes